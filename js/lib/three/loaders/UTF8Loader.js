function getHttpRequest(e,t,r){var o={load:function(e){t(a,e)},progress:function(e){r(a,e)}},a=new XMLHttpRequest;addListeners(a,o),a.open("GET",e,!0),a.send(null)}function getJsonRequest(e,t){getHttpRequest(e,function(e){t(JSON.parse(e.responseText))},function(){})}function addListeners(e,t){for(var r in t)e.addEventListener(r,t[r])}THREE.UTF8Loader=function(){},THREE.UTF8Loader.prototype.load=function(e,t,r){this.downloadModelJson(e,r,t)},THREE.UTF8Loader.BufferGeometryCreator=function(){},THREE.UTF8Loader.BufferGeometryCreator.prototype.create=function(e,t){var r,o,a,n,d,s,c,i,f=t.length/3,u=new THREE.BufferGeometry,h=new Float32Array(3*f*3),l=new Float32Array(3*f*3),p=new Float32Array(3*f*2),E=e.length,A=8;for(o=0,a=0,r=a;E>r;r+=A)n=e[r],d=e[r+1],s=e[r+2],h[o++]=n,h[o++]=d,h[o++]=s;for(o=0,a=3,r=a;E>r;r+=A)c=e[r],i=e[r+1],p[o++]=c,p[o++]=i;for(o=0,a=5,r=a;E>r;r+=A)n=e[r],d=e[r+1],s=e[r+2],l[o++]=n,l[o++]=d,l[o++]=s;return u.addAttribute("index",new THREE.BufferAttribute(t,1)),u.addAttribute("position",new THREE.BufferAttribute(h,3)),u.addAttribute("normal",new THREE.BufferAttribute(l,3)),u.addAttribute("uv",new THREE.BufferAttribute(p,2)),u.offsets.push({start:0,count:t.length,index:0}),u.computeBoundingSphere(),u};var DEFAULT_DECODE_PARAMS={decodeOffsets:[-4095,-4095,-4095,0,0,-511,-511,-511],decodeScales:[1/8191,1/8191,1/8191,1/1023,1/1023,1/1023,1/1023,1/1023]};THREE.UTF8Loader.prototype.decompressAttribsInner_=function(e,t,r,o,a,n,d,s){for(var c=0,i=t;r>i;i++){var f=e.charCodeAt(i);c+=f>>1^-(1&f),o[a]=s*(c+d),a+=n}},THREE.UTF8Loader.prototype.decompressIndices_=function(e,t,r,o,a){for(var n=0,d=0;r>d;d++){var s=e.charCodeAt(t++);o[a++]=n-s,0===s&&n++}},THREE.UTF8Loader.prototype.decompressAABBs_=function(e,t,r,o,a){for(var n=6*r,d=t+n,s=0,c=new Float32Array(n),i=t;d>i;i+=6){var f=e.charCodeAt(i+0)+o[0],u=e.charCodeAt(i+1)+o[1],h=e.charCodeAt(i+2)+o[2],l=e.charCodeAt(i+3)+1>>1,p=e.charCodeAt(i+4)+1>>1,E=e.charCodeAt(i+5)+1>>1;c[s++]=a[0]*(f+l),c[s++]=a[1]*(u+p),c[s++]=a[2]*(h+E),c[s++]=a[0]*l,c[s++]=a[1]*p,c[s++]=a[2]*E}return c},THREE.UTF8Loader.prototype.decompressMesh=function(e,t,r,o,a,n){for(var d=r.decodeScales.length,s=r.decodeOffsets,c=r.decodeScales,i=t.attribRange[0],f=t.attribRange[1],u=i,h=new Float32Array(d*f),l=0;d>l;l++){var p=u+f,E=c[l];E&&this.decompressAttribsInner_(e,u,p,h,l,d,s[l],E),u=p}var A=(t.indexRange[0],3*t.indexRange[1]),T=new Uint16Array(A);this.decompressIndices_(e,u,A,T,0);var v=void 0,R=t.bboxes;R&&(v=this.decompressAABBs_(e,R,t.names.length,s,c)),n(o,a,h,T,v,t)},THREE.UTF8Loader.prototype.copyAttrib=function(e,t,r,o){for(var a=0;e>a;a++)r[a]=t[e*o+a]},THREE.UTF8Loader.prototype.decodeAttrib2=function(e,t,r,o,a,n,d,s,c,i){for(var f=0;5>f;f++){var u=e.charCodeAt(a+n*f+i),h=u>>1^-(1&u);c[f]+=h,s[t*i+f]=c[f],d[t*i+f]=o[f]*(c[f]+r[f])}},THREE.UTF8Loader.prototype.accumulateNormal=function(e,t,r,o,a){var n=o[8*e],d=o[8*e+1],s=o[8*e+2],c=o[8*t],i=o[8*t+1],f=o[8*t+2],u=o[8*r],h=o[8*r+1],l=o[8*r+2];c-=n,i-=d,f-=s,u-=n,h-=d,l-=s,n=i*l-f*h,d=f*u-c*l,s=c*h-i*u,a[3*e]+=n,a[3*e+1]+=d,a[3*e+2]+=s,a[3*t]+=n,a[3*t+1]+=d,a[3*t+2]+=s,a[3*r]+=n,a[3*r+1]+=d,a[3*r+2]+=s},THREE.UTF8Loader.prototype.decompressMesh2=function(e,t,r,o,a,n){for(var d=96,s=r.decodeScales.length,c=r.decodeOffsets,i=r.decodeScales,f=t.attribRange[0],u=t.attribRange[1],h=t.codeRange[0],l=(t.codeRange[1],3*t.codeRange[2]),p=new Uint16Array(l),E=new Int32Array(3*u),A=new Uint16Array(s),T=new Uint16Array(s*u),v=new Float32Array(s*u),R=0,y=0,b=0;l>b;b+=3){var m=e.charCodeAt(h++),g=Math.min(b,d);if(g>m){var w,H,F,L=m%3,C=b-(m-L);switch(L){case 0:w=p[C+2],H=p[C+1],F=p[C+0];break;case 1:w=p[C+0],H=p[C+2],F=p[C+1];break;case 2:w=p[C+1],H=p[C+0],F=p[C+2]}p[y++]=w,p[y++]=H,m=e.charCodeAt(h++);var U=R-m;if(p[y++]=U,0===m){for(var M=0;5>M;M++){var B=e.charCodeAt(f+u*M+R),x=(B>>1^-(1&B))+T[s*w+M]+T[s*H+M]-T[s*F+M];A[M]=x,T[s*R+M]=x,v[s*R+M]=i[M]*(x+c[M])}R++}else this.copyAttrib(s,T,A,U);this.accumulateNormal(w,H,U,T,E)}else{var _=R-(m-g);p[y++]=_,m===g?this.decodeAttrib2(e,s,c,i,f,u,v,T,A,R++):this.copyAttrib(s,T,A,_),m=e.charCodeAt(h++);var O=R-m;p[y++]=O,0===m?this.decodeAttrib2(e,s,c,i,f,u,v,T,A,R++):this.copyAttrib(s,T,A,O),m=e.charCodeAt(h++);var S=R-m;if(p[y++]=S,0===m){for(var M=0;5>M;M++)A[M]=(T[s*_+M]+T[s*O+M])/2;this.decodeAttrib2(e,s,c,i,f,u,v,T,A,R++)}else this.copyAttrib(s,T,A,S);this.accumulateNormal(_,O,S,T,E)}}for(var b=0;u>b;b++){var D=E[3*b],q=E[3*b+1],P=E[3*b+2],k=511/Math.sqrt(D*D+q*q+P*P),I=e.charCodeAt(f+5*u+b),G=e.charCodeAt(f+6*u+b),J=e.charCodeAt(f+7*u+b);v[s*b+5]=k*D+(I>>1^-(1&I)),v[s*b+6]=k*q+(G>>1^-(1&G)),v[s*b+7]=k*P+(J>>1^-(1&J))}n(o,a,v,p,void 0,t)},THREE.UTF8Loader.prototype.downloadMesh=function(e,t,r,o,a){function n(e){for(;s<r.length;){var n=r[s],c=n.indexRange;if(c){var i=c[0]+3*c[1];if(e.responseText.length<i)break;d.decompressMesh(e.responseText,n,o,t,s,a)}else{var f=n.codeRange,i=f[0]+f[1];if(e.responseText.length<i)break;d.decompressMesh2(e.responseText,n,o,t,s,a)}++s}}var d=this,s=0;getHttpRequest(e,function(e,t){(200===e.status||0===e.status)&&n(e,t)},n)},THREE.UTF8Loader.prototype.downloadMeshes=function(e,t,r,o){for(var a in t){var n=t[a];this.downloadMesh(e+a,a,n,r,o)}},THREE.UTF8Loader.prototype.createMeshCallback=function(e,t,r){var o=0,a=0,n={},d={},s={},c=t.urls;for(var i in c)n[i]=c[i].length,d[i]=0,a++,s[i]=new THREE.Object3D;var f=new THREE.Object3D,u=new THREE.MTLLoader.MaterialCreator(e,t.options);u.setMaterials(t.materials),u.preload();var h=new THREE.UTF8Loader.BufferGeometryCreator,l=function(e,t,c,i,l,p){var E=h.create(c,i),A=u.create(p.material),T=new THREE.Mesh(E,A);s[e].add(T),d[e]++,d[e]===n[e]&&(o++,f.add(s[e]),o===a&&r(f))};return l},THREE.UTF8Loader.prototype.downloadModel=function(e,t,r,o){var a=this.createMeshCallback(t,r,o);this.downloadMeshes(e,r.urls,r.decodeParams,a)},THREE.UTF8Loader.prototype.downloadModelJson=function(e,t,r){getJsonRequest(e,function(o){o.decodeParams||(o.decodeParams=t&&t.decodeParams?t.decodeParams:DEFAULT_DECODE_PARAMS),o.options=t;var a=e.substr(0,e.lastIndexOf("/")+1),n=a;t&&t.geometryBase&&(a=t.geometryBase,"/"!==a.charAt(a.length-1)&&(a+="/")),t&&t.materialBase&&(n=t.materialBase,"/"!==n.charAt(n.length-1)&&(n+="/")),this.downloadModel(a,n,o,r)}.bind(this))};