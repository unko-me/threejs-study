THREE.GLTFLoaderUtils=Object.create(Object,{MISSING_DESCRIPTION:{value:"MISSING_DESCRIPTION"},INVALID_PATH:{value:"INVALID_PATH"},INVALID_TYPE:{value:"INVALID_TYPE"},XMLHTTPREQUEST_STATUS_ERROR:{value:"XMLHTTPREQUEST_STATUS_ERROR"},NOT_FOUND:{value:"NOT_FOUND"},ARRAY_BUFFER:{value:"ArrayBuffer"},_streams:{value:{},writable:!0},_streamsStatus:{value:{},writable:!0},_resources:{value:{},writable:!0},_resourcesStatus:{value:{},writable:!0},init:{value:function(){this._streams={},this._streamsStatus={},this._resources={},this._resourcesStatus={}}},_containsResource:{enumerable:!1,value:function(e){return this._resources[e]?!0:!1}},_storeResource:{enumerable:!1,value:function(e,t){return e?(this._containsResource[e]&&console.log("WARNING: resource:"+e+" is already stored, overriding"),void(this._resources[e]=t)):void console.log("ERROR: entry does not contain id, cannot store")}},_getResource:{enumerable:!1,value:function(e){return this._resources[e]}},_loadStream:{value:function(e,t,r){if(!t)return void r.handleError(THREE.GLTFLoaderUtils.INVALID_TYPE,null);if(!e)return void r.handleError(THREE.GLTFLoaderUtils.INVALID_PATH);var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType=t===this.ARRAY_BUFFER?"arraybuffer":"text",a.setRequestHeader("If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),a.addEventListener("load",function(){r.streamAvailable(e,a.response)},!1),a.addEventListener("error",function(){r.handleError(THREE.GLTFLoaderUtils.XMLHTTPREQUEST_STATUS_ERROR,a.status)},!1),a.send(null)}},send:{value:0,writable:!0},requested:{value:0,writable:!0},_handleRequest:{value:function(e){var t=this._resourcesStatus[e.id];t?this._resourcesStatus[e.id]++:this._resourcesStatus[e.id]=1;var r=this._streamsStatus[e.path];if(r&&"loading"===r.status)return void r.requests.push(e);this._streamsStatus[e.path]={status:"loading",requests:[e]};var a=this,s={};s.streamAvailable=function(e,t){var r=a._streamsStatus[e],s=r.requests;s.forEach(function(e){var r=t.slice(e.range[0],e.range[1]),s=e.delegate.convert(r,e.ctx);a._storeResource(e.id,s),e.delegate.resourceAvailable(s,e.ctx),--a._resourcesStatus[e.id]},this),delete a._streamsStatus[e]},s.handleError=function(t,r){e.delegate.handleError(t,r)},this._loadStream(e.path,e.type,s)}},_elementSizeForGLType:{value:function(e){switch(e){case WebGLRenderingContext.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case WebGLRenderingContext.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case WebGLRenderingContext.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case WebGLRenderingContext.FLOAT_VEC2:return 2*Float32Array.BYTES_PER_ELEMENT;case WebGLRenderingContext.FLOAT_VEC3:return 3*Float32Array.BYTES_PER_ELEMENT;case WebGLRenderingContext.FLOAT_VEC4:return 4*Float32Array.BYTES_PER_ELEMENT;case WebGLRenderingContext.FLOAT_MAT3:return 9*Float32Array.BYTES_PER_ELEMENT;case WebGLRenderingContext.FLOAT_MAT4:return 16*Float32Array.BYTES_PER_ELEMENT;default:return null}}},_handleWrappedBufferViewResourceLoading:{value:function(e,t,r){var a=e.bufferView,s=a.buffer,n=e.byteOffset+a.description.byteOffset,u=[n,this._elementSizeForGLType(e.type)*e.count+n];this._handleRequest({id:e.id,range:u,type:s.description.type,path:s.description.path,delegate:t,ctx:r},null)}},getBuffer:{value:function(e,t,r){var a=this._getResource(e.id);return a?a:(this._handleWrappedBufferViewResourceLoading(e,t,r),null)}},getFile:{value:function(e,t,r){return e.delegate=t,e.ctx=r,this._handleRequest({id:e.id,path:e.path,range:[0],type:"text",delegate:t,ctx:r},null),null}}});