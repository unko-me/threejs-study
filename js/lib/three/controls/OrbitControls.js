THREE.OrbitControls=function(t,e){function n(){return 2*Math.PI/60/60*E.autoRotateSpeed}function o(){return Math.pow(.95,E.zoomSpeed)}function a(t){if(E.enabled!==!1){if(t.preventDefault(),t.button===E.mouseButtons.ORBIT){if(E.noRotate===!0)return;x=j.ROTATE,f.set(t.clientX,t.clientY)}else if(t.button===E.mouseButtons.ZOOM){if(E.noZoom===!0)return;x=j.DOLLY,H.set(t.clientX,t.clientY)}else if(t.button===E.mouseButtons.PAN){if(E.noPan===!0)return;x=j.PAN,v.set(t.clientX,t.clientY)}document.addEventListener("mousemove",i,!1),document.addEventListener("mouseup",s,!1),E.dispatchEvent(Y)}}function i(t){if(E.enabled!==!1){t.preventDefault();var e=E.domElement===document?E.domElement.body:E.domElement;if(x===j.ROTATE){if(E.noRotate===!0)return;b.set(t.clientX,t.clientY),T.subVectors(b,f),E.rotateLeft(2*Math.PI*T.x/e.clientWidth*E.rotateSpeed),E.rotateUp(2*Math.PI*T.y/e.clientHeight*E.rotateSpeed),f.copy(b)}else if(x===j.DOLLY){if(E.noZoom===!0)return;M.set(t.clientX,t.clientY),P.subVectors(M,H),P.y>0?E.dollyIn():E.dollyOut(),H.copy(M)}else if(x===j.PAN){if(E.noPan===!0)return;y.set(t.clientX,t.clientY),g.subVectors(y,v),E.pan(g.x,g.y),v.copy(y)}E.update()}}function s(){E.enabled!==!1&&(document.removeEventListener("mousemove",i,!1),document.removeEventListener("mouseup",s,!1),E.dispatchEvent(I),x=j.NONE)}function c(t){if(E.enabled!==!1&&E.noZoom!==!0){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?E.dollyOut():E.dollyIn(),E.update(),E.dispatchEvent(Y),E.dispatchEvent(I)}}function r(t){if(E.enabled!==!1&&E.noKeys!==!0&&E.noPan!==!0)switch(t.keyCode){case E.keys.UP:E.pan(0,E.keyPanSpeed),E.update();break;case E.keys.BOTTOM:E.pan(0,-E.keyPanSpeed),E.update();break;case E.keys.LEFT:E.pan(E.keyPanSpeed,0),E.update();break;case E.keys.RIGHT:E.pan(-E.keyPanSpeed,0),E.update()}}function h(t){if(E.enabled!==!1){switch(t.touches.length){case 1:if(E.noRotate===!0)return;x=j.TOUCH_ROTATE,f.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(E.noZoom===!0)return;x=j.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(e*e+n*n);H.set(0,o);break;case 3:if(E.noPan===!0)return;x=j.TOUCH_PAN,v.set(t.touches[0].pageX,t.touches[0].pageY);break;default:x=j.NONE}E.dispatchEvent(Y)}}function u(t){if(E.enabled!==!1){t.preventDefault(),t.stopPropagation();var e=E.domElement===document?E.domElement.body:E.domElement;switch(t.touches.length){case 1:if(E.noRotate===!0)return;if(x!==j.TOUCH_ROTATE)return;b.set(t.touches[0].pageX,t.touches[0].pageY),T.subVectors(b,f),E.rotateLeft(2*Math.PI*T.x/e.clientWidth*E.rotateSpeed),E.rotateUp(2*Math.PI*T.y/e.clientHeight*E.rotateSpeed),f.copy(b),E.update();break;case 2:if(E.noZoom===!0)return;if(x!==j.TOUCH_DOLLY)return;var n=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY,a=Math.sqrt(n*n+o*o);M.set(0,a),P.subVectors(M,H),P.y>0?E.dollyOut():E.dollyIn(),H.copy(M),E.update();break;case 3:if(E.noPan===!0)return;if(x!==j.TOUCH_PAN)return;y.set(t.touches[0].pageX,t.touches[0].pageY),g.subVectors(y,v),E.pan(g.x,g.y),v.copy(y),E.update();break;default:x=j.NONE}}}function d(){E.enabled!==!1&&(E.dispatchEvent(I),x=j.NONE)}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var l,p,E=this,m=1e-6,f=new THREE.Vector2,b=new THREE.Vector2,T=new THREE.Vector2,v=new THREE.Vector2,y=new THREE.Vector2,g=new THREE.Vector2,O=new THREE.Vector3,R=new THREE.Vector3,H=new THREE.Vector2,M=new THREE.Vector2,P=new THREE.Vector2,L=0,A=0,w=1,N=new THREE.Vector3,k=new THREE.Vector3,V=new THREE.Quaternion,j={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},x=j.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone();var D=(new THREE.Quaternion).setFromUnitVectors(t.up,new THREE.Vector3(0,1,0)),S=D.clone().inverse(),U={type:"change"},Y={type:"start"},I={type:"end"};this.rotateLeft=function(t){void 0===t&&(t=n()),A-=t},this.rotateUp=function(t){void 0===t&&(t=n()),L-=t},this.panLeft=function(t){var e=this.object.matrix.elements;O.set(e[0],e[1],e[2]),O.multiplyScalar(-t),N.add(O)},this.panUp=function(t){var e=this.object.matrix.elements;O.set(e[4],e[5],e[6]),O.multiplyScalar(t),N.add(O)},this.pan=function(t,e){var n=E.domElement===document?E.domElement.body:E.domElement;if(void 0!==E.object.fov){var o=E.object.position,a=o.clone().sub(E.target),i=a.length();i*=Math.tan(E.object.fov/2*Math.PI/180),E.panLeft(2*t*i/n.clientHeight),E.panUp(2*e*i/n.clientHeight)}else void 0!==E.object.top?(E.panLeft(t*(E.object.right-E.object.left)/n.clientWidth),E.panUp(e*(E.object.top-E.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(t){void 0===t&&(t=o()),w/=t},this.dollyOut=function(t){void 0===t&&(t=o()),w*=t},this.update=function(){var t=this.object.position;R.copy(t).sub(this.target),R.applyQuaternion(D),l=Math.atan2(R.x,R.z),p=Math.atan2(Math.sqrt(R.x*R.x+R.z*R.z),R.y),this.autoRotate&&this.rotateLeft(n()),l+=A,p+=L,l=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,l)),p=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,p)),p=Math.max(m,Math.min(Math.PI-m,p));var e=R.length()*w;e=Math.max(this.minDistance,Math.min(this.maxDistance,e)),this.target.add(N),R.x=e*Math.sin(p)*Math.sin(l),R.y=e*Math.cos(p),R.z=e*Math.sin(p)*Math.cos(l),R.applyQuaternion(S),t.copy(this.target).add(R),this.object.lookAt(this.target),A=0,L=0,w=1,N.set(0,0,0),(k.distanceToSquared(this.object.position)>m||8*(1-V.dot(this.object.quaternion))>m)&&(this.dispatchEvent(U),k.copy(this.object.position),V.copy(this.object.quaternion))},this.reset=function(){x=j.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.update()},this.getPolarAngle=function(){return p},this.getAzimuthalAngle=function(){return l},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousedown",a,!1),this.domElement.addEventListener("mousewheel",c,!1),this.domElement.addEventListener("DOMMouseScroll",c,!1),this.domElement.addEventListener("touchstart",h,!1),this.domElement.addEventListener("touchend",d,!1),this.domElement.addEventListener("touchmove",u,!1),window.addEventListener("keydown",r,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);