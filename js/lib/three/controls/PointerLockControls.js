THREE.PointerLockControls=function(e){var t=this;e.rotation.set(0,0,0);var n=new THREE.Object3D;n.add(e);var a=new THREE.Object3D;a.position.y=10,a.add(n);var o=!1,r=!1,c=!1,i=!1,s=!1,d=!1,m=performance.now(),u=new THREE.Vector3,v=Math.PI/2,y=function(e){if(t.enabled!==!1){var o=e.movementX||e.mozMovementX||e.webkitMovementX||0,r=e.movementY||e.mozMovementY||e.webkitMovementY||0;a.rotation.y-=.002*o,n.rotation.x-=.002*r,n.rotation.x=Math.max(-v,Math.min(v,n.rotation.x))}},E=function(e){switch(e.keyCode){case 38:case 87:o=!0;break;case 37:case 65:c=!0;break;case 40:case 83:r=!0;break;case 39:case 68:i=!0;break;case 32:d===!0&&(u.y+=350),d=!1}},b=function(e){switch(e.keyCode){case 38:case 87:o=!1;break;case 37:case 65:c=!1;break;case 40:case 83:r=!1;break;case 39:case 68:i=!1}};document.addEventListener("mousemove",y,!1),document.addEventListener("keydown",E,!1),document.addEventListener("keyup",b,!1),this.enabled=!1,this.getObject=function(){return a},this.isOnObject=function(e){s=e,d=e},this.getDirection=function(){var e=new THREE.Vector3(0,0,-1),t=new THREE.Euler(0,0,0,"YXZ");return function(o){return t.set(n.rotation.x,a.rotation.y,0),o.copy(e).applyEuler(t),o}}(),this.update=function(){if(t.enabled!==!1){var e=performance.now(),n=(e-m)/1e3;u.x-=10*u.x*n,u.z-=10*u.z*n,u.y-=9.8*100*n,o&&(u.z-=400*n),r&&(u.z+=400*n),c&&(u.x-=400*n),i&&(u.x+=400*n),s===!0&&(u.y=Math.max(0,u.y)),a.translateX(u.x*n),a.translateY(u.y*n),a.translateZ(u.z*n),a.position.y<10&&(u.y=0,a.position.y=10,d=!0),m=e}}};