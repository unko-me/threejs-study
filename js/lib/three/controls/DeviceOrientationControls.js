THREE.DeviceOrientationControls=function(e){var n=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0;var t=function(e){n.deviceOrientation=e},i=function(){n.screenOrientation=window.orientation||0},o=function(){var e=new THREE.Vector3(0,0,1),n=new THREE.Euler,t=new THREE.Quaternion,i=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(o,a,r,c,d){n.set(r,a,-c,"YXZ"),o.setFromEuler(n),o.multiply(i),o.multiply(t.setFromAxisAngle(e,-d))}}();this.connect=function(){i(),window.addEventListener("orientationchange",i,!1),window.addEventListener("deviceorientation",t,!1),n.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",i,!1),window.removeEventListener("deviceorientation",t,!1),n.enabled=!1},this.update=function(){if(n.enabled!==!1){var e=n.deviceOrientation.alpha?THREE.Math.degToRad(n.deviceOrientation.alpha):0,t=n.deviceOrientation.beta?THREE.Math.degToRad(n.deviceOrientation.beta):0,i=n.deviceOrientation.gamma?THREE.Math.degToRad(n.deviceOrientation.gamma):0,a=n.screenOrientation?THREE.Math.degToRad(n.screenOrientation):0;o(n.object.quaternion,e,t,i,a)}},this.connect()};