THREE.DeviceOrientationControls=function(e){var t=this;this.object=e,this.object.rotation.reorder("YXZ"),this.freeze=!0,this.deviceOrientation={},this.screenOrientation=0;var n=function(e){t.deviceOrientation=e},i=function(){t.screenOrientation=window.orientation||0},o=function(){var e=new THREE.Vector3(0,0,1),t=new THREE.Euler,n=new THREE.Quaternion,i=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(o,r,a,c,d){t.set(a,r,-c,"YXZ"),o.setFromEuler(t),o.multiply(i),o.multiply(n.setFromAxisAngle(e,-d))}}();this.connect=function(){i(),window.addEventListener("orientationchange",i,!1),window.addEventListener("deviceorientation",n,!1),t.freeze=!1},this.disconnect=function(){t.freeze=!0,window.removeEventListener("orientationchange",i,!1),window.removeEventListener("deviceorientation",n,!1)},this.update=function(){if(!t.freeze){var e=t.deviceOrientation.gamma?THREE.Math.degToRad(t.deviceOrientation.alpha):0,n=t.deviceOrientation.beta?THREE.Math.degToRad(t.deviceOrientation.beta):0,i=t.deviceOrientation.gamma?THREE.Math.degToRad(t.deviceOrientation.gamma):0,r=t.screenOrientation?THREE.Math.degToRad(t.screenOrientation):0;o(t.object.quaternion,e,n,i,r)}}};