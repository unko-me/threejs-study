var Stats=function(){var e=Date.now(),t=e,n=0,i=1/0,o=0,r=0,s=1/0,a=0,p=0,u=0,d=document.createElement("div");d.id="stats",d.addEventListener("mousedown",function(e){e.preventDefault(),E(++u%2)},!1),d.style.cssText="width:80px;opacity:0.9;cursor:pointer";var c=document.createElement("div");c.id="fps",c.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",d.appendChild(c);var l=document.createElement("div");l.id="fpsText",l.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",l.innerHTML="FPS",c.appendChild(l);var h=document.createElement("div");for(h.id="fpsGraph",h.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",c.appendChild(h);74>h.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",h.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",d.appendChild(m);var w=document.createElement("div");w.id="msText",w.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",w.innerHTML="MS",m.appendChild(w);var y=document.createElement("div");for(y.id="msGraph",y.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(y);74>y.children.length;)f=document.createElement("span"),f.style.cssText="width:1px;height:30px;float:left;background-color:#131",y.appendChild(f);var E=function(e){switch(u=e){case 0:c.style.display="block",m.style.display="none";break;case 1:c.style.display="none",m.style.display="block"}};return{REVISION:11,domElement:d,setMode:E,begin:function(){e=Date.now()},end:function(){var u=Date.now();n=u-e,i=Math.min(i,n),o=Math.max(o,n),w.textContent=n+" MS ("+i+"-"+o+")";var d=Math.min(30,30-30*(n/200));return y.appendChild(y.firstChild).style.height=d+"px",p++,u>t+1e3&&(r=Math.round(1e3*p/(u-t)),s=Math.min(s,r),a=Math.max(a,r),l.textContent=r+" FPS ("+s+"-"+a+")",d=Math.min(30,30-30*(r/100)),h.appendChild(h.firstChild).style.height=d+"px",t=u,p=0),u},update:function(){e=this.end()}}};(function(){!function(){var e;return e=new Stats,e.domElement.style.position="absolute",e.domElement.style.left="0px",e.domElement.style.top="0px",document.body.appendChild(e.domElement),setInterval(function(){e.begin(),e.end()},1e3/60)}()}).call(this),function(){var e;e=function(){function e(){}return e.canWebGL=function(){var e;try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(t){return e=t,!1}},e}(),"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?exports.CanvasDetector=e:window.CanvasDetector=e}.call(this),function(){window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}())}.call(this),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){this.option=e,this.update=t(this.update,this),this.render=t(this.render,this),this.onWindowResize=t(this.onWindowResize,this),this.setup=t(this.setup,this),this.scene=new THREE.Scene,this.setup()}return e.prototype.scene=null,e.prototype.camera=null,e.prototype.setup=function(){return this.setupCamera(),this.setupRenderer(),this.setupLights(),this.setupControl(),this.initNotify(),this._setup()},e.prototype._setup=function(){},e.prototype.initNotify=function(){return $(".notify").delay(2e3).fadeOut(1e3)},e.prototype.setupCamera=function(){return this.camera=new THREE.PerspectiveCamera(75,1.5,.1,5e3),this._setupCameraPos(),this._setupCameraLookAt()},e.prototype._setupCameraLookAt=function(){return this.camera.lookAt(new THREE.Vector3)},e.prototype._setupCameraPos=function(){return this.camera.position.set(400,1200,700)},e.prototype.setupRenderer=function(){var e;return this.renderer=Modernizr.webgl?new THREE.WebGLRenderer(null!=(e=this.option)?e.rendererParams:void 0):new THREE.CanvasRenderer,window.addEventListener("resize",this.onWindowResize),this.onWindowResize(),this._setupClearColor(),document.getElementById("renderer").appendChild(this.renderer.domElement)},e.prototype._setupClearColor=function(){var e,t,n,i,o,r;return t=(null!=(n=this.option)&&null!=(i=n.clear)?i.color:void 0)||0,e=(null!=(o=this.option)&&null!=(r=o.clear)?r.alpha:void 0)||1,this.renderer.setClearColor(t,e),this.renderer.autoClearColor=!1},e.prototype.setupLights=function(){return this._setupDirectionalLight(),this._setupAmbientLight()},e.prototype._setupAmbientLight=function(){var e,t;return(null!=(e=this.option)?e.amibientLight:void 0)?this.scene.add(new THREE.AmbientLight(null!=(t=this.option)?t.amibientLight.color:void 0)):void 0},e.prototype._setupDirectionalLight=function(){return this._directionalLight=new THREE.DirectionalLight(16777215,2),this._directionalLight.position.set(0,300,100),this.scene.add(this._directionalLight)},e.prototype.setupControl=function(){return this.control=new THREE.TrackballControls(this.camera,this.renderer.domElement)},e.prototype.onWindowResize=function(){return this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},e.prototype.render=function(){return this.renderer.render(this.scene,this.camera)},e.prototype.update=function(){var e;return null!=(e=this.control)&&e.update(),this._update(),this.render(),requestAnimationFrame(this.update)},e.prototype._update=function(){},e.prototype.startLoop=function(){return this.update()},e}(),"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?exports.BaseWorld=e:window.BaseWorld=e}.call(this),function(){var e,t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e=function(e){function t(){t.__super__.constructor.call(this,{amibientLight:{color:3355443}})}var i,o,r,s;return n(t,e),s=10,i=10,o=10,r=s*i,t.prototype._setup=function(){return this.camera.position.set(0,0,50),this._setupCubes(),this._setupLight()},t.prototype._setupLight=function(){var e;return e=new THREE.SpotLight(16777215,.5,0,Math.PI/6,10),this.scene.add(e),e.position.set(-100,200,300),e.castShadow=!0,e.shadowMapWidth=150,e.shadowMapHeight=150},t.prototype._setupCubes=function(){var e,t,n,a,p,u,d,c,l,h,f,m,w;for(c=THREE.ImageUtils.loadTexture("../../img/uni/HN1A.gif"),p=new THREE.MeshLambertMaterial({map:c}),this.cubes=[],d=.15,l=1/i,n=1/s,w=[],a=m=0;r>=0?r>m:m>r;a=r>=0?++m:--m)h=a%10,f=Math.floor(a/10),t=this._createGeometry(l,n,h,f),console.log("geometry.faceVertexUvs:",t.faceVertexUvs),e=new THREE.Mesh(t,p),e.position.set(h*o-50,f*o-5*o,-30),this.scene.add(e),this.cubes.push(e),u=Math.floor(a/10)%2===0?d:-1*d,w.push(e.userData={rotate:u});return w},t.prototype._createGeometry=function(e,t,n,i){var r,s,a,p,u,d,c,l,h,f,m;for(r=new THREE.BoxGeometry(o,o,o),u=n*e,d=(n+1)*e,c=i*t,l=(i+1)*t,m=r.faceVertexUvs[0],s=h=0,f=m.length;f>h;s=++h)p=m[s],a=s%2===0?[new THREE.Vector2(u,l),new THREE.Vector2(u,c),new THREE.Vector2(d,l)]:[new THREE.Vector2(u,c),new THREE.Vector2(d,c),new THREE.Vector2(d,l)],r.faceVertexUvs[0][s]=a;return r},t.prototype._update=function(){return this._rotateCube()},t.prototype._rotateCube=function(){var e,t,n,i,o;for(i=this.cubes,o=[],t=0,n=i.length;n>t;t++)e=i[t],o.push(e.rotation.y+=e.userData.rotate);return o},t}(BaseWorld),"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?exports.UVMozaic=e:window.UVMozaic=e}.call(this);