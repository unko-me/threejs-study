var Stats=function(){var t=Date.now(),e=t,n=0,o=1/0,i=0,r=0,s=1/0,a=0,p=0,c=0,u=document.createElement("div");u.id="stats",u.addEventListener("mousedown",function(t){t.preventDefault(),E(++c%2)},!1),u.style.cssText="width:80px;opacity:0.9;cursor:pointer";var d=document.createElement("div");d.id="fps",d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",u.appendChild(d);var l=document.createElement("div");l.id="fpsText",l.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",l.innerHTML="FPS",d.appendChild(l);var h=document.createElement("div");for(h.id="fpsGraph",h.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",d.appendChild(h);74>h.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",h.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",u.appendChild(m);var y=document.createElement("div");y.id="msText",y.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",y.innerHTML="MS",m.appendChild(y);var w=document.createElement("div");for(w.id="msGraph",w.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(w);74>w.children.length;)f=document.createElement("span"),f.style.cssText="width:1px;height:30px;float:left;background-color:#131",w.appendChild(f);var E=function(t){switch(c=t){case 0:d.style.display="block",m.style.display="none";break;case 1:d.style.display="none",m.style.display="block"}};return{REVISION:11,domElement:u,setMode:E,begin:function(){t=Date.now()},end:function(){var c=Date.now();n=c-t,o=Math.min(o,n),i=Math.max(i,n),y.textContent=n+" MS ("+o+"-"+i+")";var u=Math.min(30,30-30*(n/200));return w.appendChild(w.firstChild).style.height=u+"px",p++,c>e+1e3&&(r=Math.round(1e3*p/(c-e)),s=Math.min(s,r),a=Math.max(a,r),l.textContent=r+" FPS ("+s+"-"+a+")",u=Math.min(30,30-30*(r/100)),h.appendChild(h.firstChild).style.height=u+"px",e=c,p=0),c},update:function(){t=this.end()}}};(function(){!function(){var t;return t=new Stats,t.domElement.style.position="absolute",t.domElement.style.left="0px",t.domElement.style.top="0px",document.body.appendChild(t.domElement),setInterval(function(){t.begin(),t.end()},1e3/60)}()}).call(this),function(){var t;t=function(){function t(){}return t.canWebGL=function(){var t;try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return t=e,!1}},t}(),"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports?exports.CanvasDetector=t:window.CanvasDetector=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.option=t,this.update=e(this.update,this),this.render=e(this.render,this),this.onWindowResize=e(this.onWindowResize,this),this.setup=e(this.setup,this),this.scene=new THREE.Scene,this.setup()}return t.prototype.scene=null,t.prototype.camera=null,t.prototype.setup=function(){return this.setupCamera(),this.setupRenderer(),this.setupLights(),this.setupControl(),this._setup()},t.prototype.setupCamera=function(){return this.camera=new THREE.PerspectiveCamera(75,1.5,1,5e3),this._setupCameraPos(),this._setupCameraLookAt()},t.prototype._setupCameraLookAt=function(){return this.camera.lookAt(new THREE.Vector3)},t.prototype._setupCameraPos=function(){return this.camera.position.set(400,1200,700)},t.prototype.setupRenderer=function(){return this.renderer=Modernizr.webgl?new THREE.WebGLRenderer:new THREE.CanvasRenderer,window.addEventListener("resize",this.onWindowResize),this.onWindowResize(),this._setupClearColor(),document.getElementById("renderer").appendChild(this.renderer.domElement)},t.prototype._setupClearColor=function(){var t,e,n,o,i,r;return e=(null!=(n=this.option)&&null!=(o=n.clear)?o.color:void 0)||0,t=(null!=(i=this.option)&&null!=(r=i.clear)?r.alpha:void 0)||0,this.renderer.setClearColor(e,t)},t.prototype.setupLights=function(){return this._setupDirectionalLight(),this._setupAmbientLight()},t.prototype._setupAmbientLight=function(){var t,e;return(null!=(t=this.option)?t.amibientLight:void 0)?this.scene.add(new THREE.AmbientLight(null!=(e=this.option)?e.amibientLight.color:void 0)):void 0},t.prototype._setupDirectionalLight=function(){return this._directionalLight=new THREE.DirectionalLight(16777215,2),this._directionalLight.position.set(0,300,100),this.scene.add(this._directionalLight)},t.prototype.setupControl=function(){return this.control=new THREE.TrackballControls(this.camera)},t.prototype.onWindowResize=function(){return this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},t.prototype.render=function(){return this.renderer.render(this.scene,this.camera)},t.prototype.update=function(){var t;return null!=(t=this.control)&&t.update(),this._update(),this.render(),requestAnimationFrame(this.update)},t.prototype._update=function(){},t.prototype.startLoop=function(){return this.update()},t}(),"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports?exports.BaseWorld=t:window.BaseWorld=t}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};t=function(t){function e(){e.__super__.constructor.call(this,{amibientLight:{color:3355443}})}var o,i,r,s;return n(e,t),s=10,o=10,i=10,r=s*o,e.prototype._setup=function(){return this.camera.position.set(0,0,50),this._setupCubes(),this._setupLight()},e.prototype._setupLight=function(){var t;return t=new THREE.SpotLight(16777215,.5,0,Math.PI/6,10),this.scene.add(t),t.position.set(-100,200,300),t.castShadow=!0,t.shadowMapWidth=150,t.shadowMapHeight=150},e.prototype._setupCubes=function(){var t,e,n,a,p,c,u,d,l,h,f,m,y;for(d=THREE.ImageUtils.loadTexture("../../img/uni/HN1A.gif"),p=new THREE.MeshLambertMaterial({map:d}),this.cubes=[],u=.15,l=1/o,n=1/s,y=[],a=m=0;r>=0?r>m:m>r;a=r>=0?++m:--m)h=a%10,f=Math.floor(a/10),e=this._createGeometry(l,n,h,f),console.log("geometry.faceVertexUvs:",e.faceVertexUvs),t=new THREE.Mesh(e,p),t.position.set(h*i-50,f*i-5*i,-30),this.scene.add(t),this.cubes.push(t),c=Math.floor(a/10)%2===0?u:-1*u,y.push(t.userData={rotate:c});return y},e.prototype._createGeometry=function(t,e,n,o){var r,s,a,p,c,u,d,l,h,f,m;for(r=new THREE.BoxGeometry(i,i,i),c=n*t,u=(n+1)*t,d=o*e,l=(o+1)*e,m=r.faceVertexUvs[0],s=h=0,f=m.length;f>h;s=++h)p=m[s],a=s%2===0?[new THREE.Vector2(c,l),new THREE.Vector2(c,d),new THREE.Vector2(u,l)]:[new THREE.Vector2(c,d),new THREE.Vector2(u,d),new THREE.Vector2(u,l)],r.faceVertexUvs[0][s]=a;return r},e.prototype._update=function(){return this._rotateCube()},e.prototype._rotateCube=function(){var t,e,n,o,i;for(o=this.cubes,i=[],e=0,n=o.length;n>e;e++)t=o[e],i.push(t.rotation.y+=t.userData.rotate);return i},e}(BaseWorld),"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports?exports.UVMozaic=t:window.UVMozaic=t}.call(this);