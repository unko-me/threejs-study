var Stats=function(){var t=Date.now(),e=t,n=0,i=1/0,o=0,r=0,s=1/0,a=0,u=0,p=0,h=document.createElement("div");h.id="stats",h.addEventListener("mousedown",function(t){t.preventDefault(),g(++p%2)},!1),h.style.cssText="width:80px;opacity:0.9;cursor:pointer";var d=document.createElement("div");d.id="fps",d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",h.appendChild(d);var c=document.createElement("div");c.id="fpsText",c.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",c.innerHTML="FPS",d.appendChild(c);var l=document.createElement("div");for(l.id="fpsGraph",l.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",d.appendChild(l);74>l.children.length;){var m=document.createElement("span");m.style.cssText="width:1px;height:30px;float:left;background-color:#113",l.appendChild(m)}var y=document.createElement("div");y.id="ms",y.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",h.appendChild(y);var f=document.createElement("div");f.id="msText",f.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",f.innerHTML="MS",y.appendChild(f);var x=document.createElement("div");for(x.id="msGraph",x.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",y.appendChild(x);74>x.children.length;)m=document.createElement("span"),m.style.cssText="width:1px;height:30px;float:left;background-color:#131",x.appendChild(m);var g=function(t){switch(p=t){case 0:d.style.display="block",y.style.display="none";break;case 1:d.style.display="none",y.style.display="block"}};return{REVISION:11,domElement:h,setMode:g,begin:function(){t=Date.now()},end:function(){var p=Date.now();n=p-t,i=Math.min(i,n),o=Math.max(o,n),f.textContent=n+" MS ("+i+"-"+o+")";var h=Math.min(30,30-30*(n/200));return x.appendChild(x.firstChild).style.height=h+"px",u++,p>e+1e3&&(r=Math.round(1e3*u/(p-e)),s=Math.min(s,r),a=Math.max(a,r),c.textContent=r+" FPS ("+s+"-"+a+")",h=Math.min(30,30-30*(r/100)),l.appendChild(l.firstChild).style.height=h+"px",e=p,u=0),p},update:function(){t=this.end()}}};(function(){!function(){var t;return t=new Stats,t.domElement.style.position="absolute",t.domElement.style.left="0px",t.domElement.style.top="0px",document.body.appendChild(t.domElement),setInterval(function(){t.begin(),t.end()},1e3/60)}()}).call(this),function(){var t;t=function(){function t(){}return t.canWebGL=function(){var t;try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return t=e,!1}},t}(),"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports?exports.CanvasDetector=t:window.CanvasDetector=t}.call(this),function(){window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.option=t,this.update=e(this.update,this),this.render=e(this.render,this),this.onWindowResize=e(this.onWindowResize,this),this.setup=e(this.setup,this),this.scene=new THREE.Scene,this.setup()}return t.prototype.scene=null,t.prototype.camera=null,t.prototype.setup=function(){return this.setupCamera(),this.setupRenderer(),this.setupLights(),this.setupControl(),this.initNotify(),this._setup()},t.prototype._setup=function(){},t.prototype.initNotify=function(){return $(".notify").delay(2e3).fadeOut(1e3)},t.prototype.setupCamera=function(){return this.camera=new THREE.PerspectiveCamera(75,1.5,.1,5e3),this._setupCameraPos(),this._setupCameraLookAt()},t.prototype._setupCameraLookAt=function(){return this.camera.lookAt(new THREE.Vector3)},t.prototype._setupCameraPos=function(){return this.camera.position.set(400,1200,700)},t.prototype.setupRenderer=function(){var t;return this.renderer=Modernizr.webgl?new THREE.WebGLRenderer(null!=(t=this.option)?t.rendererParams:void 0):new THREE.CanvasRenderer,window.addEventListener("resize",this.onWindowResize),this.onWindowResize(),this._setupClearColor(),document.getElementById("renderer").appendChild(this.renderer.domElement)},t.prototype._setupClearColor=function(){var t,e,n,i,o,r;return e=(null!=(n=this.option)&&null!=(i=n.clear)?i.color:void 0)||0,t=(null!=(o=this.option)&&null!=(r=o.clear)?r.alpha:void 0)||1,this.renderer.setClearColor(e,t),this.renderer.autoClearColor=!1},t.prototype.setupLights=function(){return this._setupDirectionalLight(),this._setupAmbientLight()},t.prototype._setupAmbientLight=function(){var t,e;return(null!=(t=this.option)?t.amibientLight:void 0)?this.scene.add(new THREE.AmbientLight(null!=(e=this.option)?e.amibientLight.color:void 0)):void 0},t.prototype._setupDirectionalLight=function(){return this._directionalLight=new THREE.DirectionalLight(16777215,2),this._directionalLight.position.set(0,300,100),this.scene.add(this._directionalLight)},t.prototype.setupControl=function(){return this.control=new THREE.TrackballControls(this.camera,this.renderer.domElement)},t.prototype.onWindowResize=function(){return this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},t.prototype.render=function(){return this.renderer.render(this.scene,this.camera)},t.prototype.update=function(){var t;return null!=(t=this.control)&&t.update(),this._update(),this.render(),requestAnimationFrame(this.update)},t.prototype._update=function(){},t.prototype.startLoop=function(){return this.update()},t}(),"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports?exports.BaseWorld=t:window.BaseWorld=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function n(){this._updateAnim=e(this._updateAnim,this),this._kobetuAnim2=e(this._kobetuAnim2,this),this._kobetuAnim=e(this._kobetuAnim,this),n.__super__.constructor.call(this,{amibientLight:{color:3355443}})}return i(n,t),n.prototype._setupCameraPos=function(){return this.camera.position.set(0,0,300)},n.prototype._setup=function(){return this._setupText(),this._startAnimation()},n.prototype._amp=0,n.prototype._startAnimation=function(){return this._kobetuAnim(),$(window).on("click",function(t){return function(){return t._kobetuAnim()}}(this))},n.prototype._kobetuAnim=function(){var t,e,n,i,o,r,s,a,u;return e=102,e=2,u=e+1,s=100,n=this.textGeometry.boundingBox,r=n.max.y-n.min.y,i=n.max.y-n.min.y>>1,i-=15,console.log(n.max.y,n.min.y,r,i),o="easeOutCubic",a=4*Math.PI,t=Math.PI/2,_.each(this._text.geometry.vertices,function(n){return function(r,u){var p,h,d,c,l;return l=n.originalBox.vertices[u],h=Math.floor(r.x/10)/100,d=h+Math.floor(r.y/10)/100,c={amp:0,ampZ:0,radius:0},s=Math.abs(l.y-i),s=Math.pow(s,2)/26,c.radius=s,p=r.y<i?Math.PI:0,TweenMax.to(c,e,{amp:a,delay:h,ease:o,onUpdate:function(){return r.y=l.y+Math.sin(c.amp+p)*c.radius}}),TweenMax.to(c,e,{ampZ:a,delay:d,ease:o,onUpdate:function(){return r.z=l.z+Math.cos(c.ampZ+t+p)*c.radius}})}}(this))},n.prototype._kobetuAnim2=function(){var t,e,n,i,o,r,s,a,u;for(i=100,a=this._text.geometry.vertices,u=[],e=r=0,s=a.length;s>r;e=++r)o=a[e],n=this.originalBox.vertices[e],t=Math.floor(o.x/10)/100,u.push(function(){return TweenMax.to(o,.5,{y:n.y+100,yoyo:!0,repeat:3,delay:t})}());return u},n.prototype._updateAnim=function(){var t,e,n,i,o,r,s,a;for(i=100,a=this._text.geometry.vertices,e=r=0,s=a.length;s>r;e=++r)o=a[e],n=this.originalBox.vertices[e],t=o.x%50,o.y=n.y+Math.sin(this._amp+t)*i,o.z=n.z+Math.cos(this._amp+t)*i;return this._text.geometry.verticesNeedUpdate=!0},n.prototype._setupText=function(){var t,e,n,i,o,r,s,a;for(i="SENSORS",i="\u30bb\u30fb\u30ea\u30fc\u30b0",i="\u3042",this.textGeometry=new THREE.TextGeometry(i,{size:80,height:0,curveSegments:1,font:"pixelmplus12"}),this.textGeometry.mergeVertices(),a=this.textGeometry.vertices,r=0,s=a.length;s>r;r++)o=a[r],console.log("vertex:",o);return this.textGeometry.computeBoundingBox(),t=-.5*(this.textGeometry.boundingBox.max.x-this.textGeometry.boundingBox.min.x),this.textMaterial=new THREE.MeshBasicMaterial({color:16777215,shading:THREE.FlatShading,vertexColors:THREE.VertexColors,wireframe:!0}),this._setVertexColor(),n=new THREE.Mesh(this.textGeometry,this.textMaterial),n.position.x=t,n.position.y=0,n.position.z=0,n.rotation.x=0,n.rotation.y=2*Math.PI,e=new THREE.Object3D,e.add(n),this.scene.add(e),this._text=n,this.originalBox=this._text.geometry.clone()},n.prototype._setVertexColor=function(){var t,e,n,i,o,r,s,a;for(s=this.textGeometry.faces,a=[],o=0,r=s.length;r>o;o+=1)e=s[o],i=e instanceof THREE.Face3?3:4,a.push(function(){var o,r;for(r=[],n=o=0;i>=0?i>o:o>i;n=i>=0?++o:--o)t=new THREE.Color(0),t.setHSL(Math.random(),1,.5),r.push(e.vertexColors[n]=t);return r}());return a},n.prototype._setupGround=function(){var t,e,n;return e=new THREE.MeshLambertMaterial({color:3355443}),t=new THREE.PlaneGeometry(6e3,6e3,10,10),n=new THREE.Mesh(t,e),this.scene.add(n),n.rotation.x=-90*Math.PI/180},n.prototype._update=function(){return this._text.geometry.verticesNeedUpdate=!0},n.prototype._update_yurayura=function(){if(this._yuragi>.1){if(this._yuragi+=.039*(0-this._yuragi),this._yurayura(),Math.random()<.4)return this._setVertexColor(),this.textGeometry.colorsNeedUpdate=!0}else if(Math.random()<.5)return this._setVertexColor(),this.textGeometry.colorsNeedUpdate=!0},n.prototype._yuragi=2e3,n.prototype._yurayura=function(){var t,e,n,i,o,r,s;for(s=this._text.geometry.vertices,t=o=0,r=s.length;r>o;t=++o)n=s[t],e=this.originalBox.vertices[t],i=Math.random()*this._yuragi-.5*this._yuragi,n.x+=.7*(e.x-(n.x+i)),n.y+=.7*(e.y-(n.y+i));return this._text.geometry.verticesNeedUpdate=!0},n}(BaseWorld),"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports?exports.SensorsText=t:window.SensorsText=t,(new t).startLoop()}.call(this);