var Stats=function(){var e=Date.now(),t=e,n=0,i=1/0,o=0,r=0,s=1/0,a=0,p=0,d=0,l=document.createElement("div");l.id="stats",l.addEventListener("mousedown",function(e){e.preventDefault(),x(++d%2)},!1),l.style.cssText="width:80px;opacity:0.9;cursor:pointer";var c=document.createElement("div");c.id="fps",c.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",l.appendChild(c);var u=document.createElement("div");u.id="fpsText",u.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",u.innerHTML="FPS",c.appendChild(u);var h=document.createElement("div");for(h.id="fpsGraph",h.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",c.appendChild(h);74>h.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",h.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",l.appendChild(m);var y=document.createElement("div");y.id="msText",y.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",y.innerHTML="MS",m.appendChild(y);var w=document.createElement("div");for(w.id="msGraph",w.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(w);74>w.children.length;)f=document.createElement("span"),f.style.cssText="width:1px;height:30px;float:left;background-color:#131",w.appendChild(f);var x=function(e){switch(d=e){case 0:c.style.display="block",m.style.display="none";break;case 1:c.style.display="none",m.style.display="block"}};return{REVISION:11,domElement:l,setMode:x,begin:function(){e=Date.now()},end:function(){var d=Date.now();n=d-e,i=Math.min(i,n),o=Math.max(o,n),y.textContent=n+" MS ("+i+"-"+o+")";var l=Math.min(30,30-30*(n/200));return w.appendChild(w.firstChild).style.height=l+"px",p++,d>t+1e3&&(r=Math.round(1e3*p/(d-t)),s=Math.min(s,r),a=Math.max(a,r),u.textContent=r+" FPS ("+s+"-"+a+")",l=Math.min(30,30-30*(r/100)),h.appendChild(h.firstChild).style.height=l+"px",t=d,p=0),d},update:function(){e=this.end()}}};(function(){!function(){var e;return e=new Stats,e.domElement.style.position="absolute",e.domElement.style.left="0px",e.domElement.style.top="0px",document.body.appendChild(e.domElement),setInterval(function(){e.begin(),e.end()},1e3/60)}()}).call(this),function(){var e;e=function(){function e(){}return e.canWebGL=function(){var e;try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(t){return e=t,!1}},e}(),"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?exports.CanvasDetector=e:window.CanvasDetector=e}.call(this),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){this.option=e,this.update=t(this.update,this),this.render=t(this.render,this),this.onWindowResize=t(this.onWindowResize,this),this.setup=t(this.setup,this),this.scene=new THREE.Scene,this.setup()}return e.prototype.scene=null,e.prototype.camera=null,e.prototype.setup=function(){return this.setupCamera(),this.setupRenderer(),this.setupLights(),this.setupControl(),this.initNotify(),this._setup()},e.prototype._setup=function(){},e.prototype.initNotify=function(){return $(".notify").delay(2e3).fadeOut(1e3)},e.prototype.setupCamera=function(){return this.camera=new THREE.PerspectiveCamera(75,1.5,1,5e3),this._setupCameraPos(),this._setupCameraLookAt()},e.prototype._setupCameraLookAt=function(){return this.camera.lookAt(new THREE.Vector3)},e.prototype._setupCameraPos=function(){return this.camera.position.set(400,1200,700)},e.prototype.setupRenderer=function(){return this.renderer=Modernizr.webgl?new THREE.WebGLRenderer:new THREE.CanvasRenderer,window.addEventListener("resize",this.onWindowResize),this.onWindowResize(),this._setupClearColor(),document.getElementById("renderer").appendChild(this.renderer.domElement)},e.prototype._setupClearColor=function(){var e,t,n,i,o,r;return t=(null!=(n=this.option)&&null!=(i=n.clear)?i.color:void 0)||0,e=(null!=(o=this.option)&&null!=(r=o.clear)?r.alpha:void 0)||1,this.renderer.setClearColor(t,e)},e.prototype.setupLights=function(){return this._setupDirectionalLight(),this._setupAmbientLight()},e.prototype._setupAmbientLight=function(){var e,t;return(null!=(e=this.option)?e.amibientLight:void 0)?this.scene.add(new THREE.AmbientLight(null!=(t=this.option)?t.amibientLight.color:void 0)):void 0},e.prototype._setupDirectionalLight=function(){return this._directionalLight=new THREE.DirectionalLight(16777215,2),this._directionalLight.position.set(0,300,100),this.scene.add(this._directionalLight)},e.prototype.setupControl=function(){return this.control=new THREE.TrackballControls(this.camera,this.renderer.domElement)},e.prototype.onWindowResize=function(){return this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},e.prototype.render=function(){return this.renderer.render(this.scene,this.camera)},e.prototype.update=function(){var e;return null!=(e=this.control)&&e.update(),this._update(),this.render(),requestAnimationFrame(this.update)},e.prototype._update=function(){},e.prototype.startLoop=function(){return this.update()},e}(),"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?exports.BaseWorld=e:window.BaseWorld=e}.call(this),function(){var e,t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e=function(e){function t(){t.__super__.constructor.call(this,{amibientLight:{color:3355443}})}return n(t,e),t.prototype._setup=function(){var e,t,n;return this._setupGround(),t=new THREE.BoxGeometry(200,200,200),n=new THREE.MeshPhongMaterial({color:"#dd3b6f"}),e=new THREE.Mesh(t,n),this.scene.add(e)},t.prototype._setupGround=function(){var e,t,n;return t=new THREE.MeshLambertMaterial({color:53687099}),e=new THREE.PlaneGeometry(6e3,6e3,10,10),n=new THREE.Mesh(e,t),this.scene.add(n),n.rotation.x=-90*Math.PI/180},t.prototype._update=function(){},t}(BaseWorld),"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?exports.BaseWorldTest=e:window.BaseWorldTest=e,(new e).startLoop()}.call(this);