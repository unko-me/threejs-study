(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(){this.loadComplete=e(this.loadComplete,this),this.loadWithXHR=e(this.loadWithXHR,this),this.workerHandler=e(this.workerHandler,this),this.loadWithWorker=e(this.loadWithWorker,this),this.start=e(this.start,this),this.enableWorker=!!window.Worker}return t.prototype.WORKER_CORE_JS="../../js/pages/worker/worker_loader.js",t.prototype.count=0,t.prototype.start=function(t){var e,o,r,i;if(this.urls=t,this.total=this.urls.length,0!==this.total)if(this.enableWorker)this.loadWithWorker(this.urls);else for(i=this.urls,o=0,r=i.length;r>o;o++)e=i[o],this.loadWithXHR(e)},t.prototype.loadWithWorker=function(){this.worker=new Worker(this.WORKER_CORE_JS),this.worker.onmessage=this.workerHandler,this.worker.postMessage(this.urls)},t.prototype.workerHandler=function(t){switch(t.data){case"end":this.worker.terminate(),this.loadComplete();break;case"next":this.loadComplete()}},t.prototype.loadWithXHR=function(t){this.xhr=new XMLHttpRequest,this.xhr.open("GET",t,!1),this.xhr.onreadystatechange=function(t){return function(){return 4===t.xhr.readyState?t.loadComplete():void 0}}(this),this.xhr.send(null)},t.prototype.loadComplete=function(){this.count++,console.log("loadcomplete"),this.count>=this.total&&console.log("\u5168\u90e8\u8aad\u307f\u8fbc\u307f\u7d42\u308f\u3063\u305f")},t}(),"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports?exports.Preloader=t:window.Preloader=t}).call(this);