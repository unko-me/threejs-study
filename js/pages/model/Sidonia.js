var Stats=function(){var e=Date.now(),t=e,r=0,n=1/0,i=0,o=0,a=1/0,s=0,d=0,p=0,h=document.createElement("div");h.id="stats",h.addEventListener("mousedown",function(e){e.preventDefault(),T(++p%2)},!1),h.style.cssText="width:80px;opacity:0.9;cursor:pointer";var l=document.createElement("div");l.id="fps",l.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",h.appendChild(l);var c=document.createElement("div");c.id="fpsText",c.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",c.innerHTML="FPS",l.appendChild(c);var u=document.createElement("div");for(u.id="fpsGraph",u.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",l.appendChild(u);74>u.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",u.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",h.appendChild(m);var E=document.createElement("div");E.id="msText",E.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",E.innerHTML="MS",m.appendChild(E);var v=document.createElement("div");for(v.id="msGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(v);74>v.children.length;)f=document.createElement("span"),f.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(f);var T=function(e){switch(p=e){case 0:l.style.display="block",m.style.display="none";break;case 1:l.style.display="none",m.style.display="block"}};return{REVISION:11,domElement:h,setMode:T,begin:function(){e=Date.now()},end:function(){var p=Date.now();r=p-e,n=Math.min(n,r),i=Math.max(i,r),E.textContent=r+" MS ("+n+"-"+i+")";var h=Math.min(30,30-30*(r/200));return v.appendChild(v.firstChild).style.height=h+"px",d++,p>t+1e3&&(o=Math.round(1e3*d/(p-t)),a=Math.min(a,o),s=Math.max(s,o),c.textContent=o+" FPS ("+a+"-"+s+")",h=Math.min(30,30-30*(o/100)),u.appendChild(u.firstChild).style.height=h+"px",t=p,d=0),p},update:function(){e=this.end()}}};(function(){!function(){var e;return e=new Stats,e.domElement.style.position="absolute",e.domElement.style.left="0px",e.domElement.style.top="0px",document.body.appendChild(e.domElement),setInterval(function(){e.begin(),e.end()},1e3/60)}()}).call(this),function(){var e;e=function(){function e(){}return e.canWebGL=function(){var e;try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(t){return e=t,!1}},e}(),"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?exports.CanvasDetector=e:window.CanvasDetector=e}.call(this),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){this.option=e,this.update=t(this.update,this),this.render=t(this.render,this),this.onWindowResize=t(this.onWindowResize,this),this.setup=t(this.setup,this),this.scene=new THREE.Scene,this.setup()}return e.prototype.scene=null,e.prototype.camera=null,e.prototype.setup=function(){return this.setupCamera(),this.setupRenderer(),this.setupLights(),this.setupControl(),this.initNotify(),this._setup()},e.prototype._setup=function(){},e.prototype.initNotify=function(){return $(".notify").delay(2e3).fadeOut(1e3)},e.prototype.setupCamera=function(){return this.camera=new THREE.PerspectiveCamera(75,1.5,.1,5e3),this._setupCameraPos(),this._setupCameraLookAt()},e.prototype._setupCameraLookAt=function(){return this.camera.lookAt(new THREE.Vector3)},e.prototype._setupCameraPos=function(){return this.camera.position.set(400,1200,700)},e.prototype.setupRenderer=function(){return this.renderer=Modernizr.webgl?new THREE.WebGLRenderer:new THREE.CanvasRenderer,window.addEventListener("resize",this.onWindowResize),this.onWindowResize(),this._setupClearColor(),document.getElementById("renderer").appendChild(this.renderer.domElement)},e.prototype._setupClearColor=function(){var e,t,r,n,i,o;return t=(null!=(r=this.option)&&null!=(n=r.clear)?n.color:void 0)||0,e=(null!=(i=this.option)&&null!=(o=i.clear)?o.alpha:void 0)||1,this.renderer.setClearColor(t,e)},e.prototype.setupLights=function(){return this._setupDirectionalLight(),this._setupAmbientLight()},e.prototype._setupAmbientLight=function(){var e,t;return(null!=(e=this.option)?e.amibientLight:void 0)?this.scene.add(new THREE.AmbientLight(null!=(t=this.option)?t.amibientLight.color:void 0)):void 0},e.prototype._setupDirectionalLight=function(){return this._directionalLight=new THREE.DirectionalLight(16777215,2),this._directionalLight.position.set(0,300,100),this.scene.add(this._directionalLight)},e.prototype.setupControl=function(){return this.control=new THREE.TrackballControls(this.camera,this.renderer.domElement)},e.prototype.onWindowResize=function(){return this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},e.prototype.render=function(){return this.renderer.render(this.scene,this.camera)},e.prototype.update=function(){var e;return null!=(e=this.control)&&e.update(),this._update(),this.render(),requestAnimationFrame(this.update)},e.prototype._update=function(){},e.prototype.startLoop=function(){return this.update()},e}(),"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?exports.BaseWorld=e:window.BaseWorld=e}.call(this),THREE.DDSLoader=function(){},THREE.DDSLoader.prototype={constructor:THREE.DDSLoader,load:function(e,t){var r=this,n=[],i=new THREE.CompressedTexture;if(i.image=n,i.flipY=!1,i.generateMipmaps=!1,e instanceof Array){var o=0,a=new THREE.XHRLoader;a.setResponseType("arraybuffer");for(var s=function(s){a.load(e[s],function(e){var a=r.parse(e,!0);n[s]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps},o+=1,6===o&&(i.format=a.format,i.needsUpdate=!0,t&&t(i))})},d=0,p=e.length;p>d;++d)s(d)}else{var a=new THREE.XHRLoader;a.setResponseType("arraybuffer"),a.load(e,function(e){var o=r.parse(e,!0);if(o.isCubemap)for(var a=o.mipmaps.length/o.mipmapCount,s=0;a>s;s++){n[s]={mipmaps:[]};for(var d=0;d<o.mipmapCount;d++)n[s].mipmaps.push(o.mipmaps[s*o.mipmapCount+d]),n[s].format=o.format,n[s].width=o.width,n[s].height=o.height}else i.image.width=o.width,i.image.height=o.height,i.mipmaps=o.mipmaps;i.format=o.format,i.needsUpdate=!0,t&&t(i)})}return i},parse:function(e,t){function r(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function n(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}function i(e,t,r,n){for(var i=r*n*4,o=new Uint8Array(e,t,i),a=new Uint8Array(i),s=0,d=0,p=0;n>p;p++)for(var h=0;r>h;h++){var l=o[d];d++;var c=o[d];d++;var u=o[d];d++;var f=o[d];d++,a[s]=u,s++,a[s]=c,s++,a[s]=l,s++,a[s]=f,s++}return a}var o={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},a=542327876,s=131072,d=512,p=4,h=r("DXT1"),l=r("DXT3"),c=r("DXT5"),u=31,f=0,m=1,E=2,v=3,T=4,g=7,w=20,R=21,H=22,y=23,L=24,x=25,M=26,b=28,C=new Int32Array(e,0,u);if(C[f]!==a)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),o;if(!C[w]&p)return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),o;var _,k=C[R],D=!1;switch(k){case h:_=8,o.format=THREE.RGB_S3TC_DXT1_Format;break;case l:_=16,o.format=THREE.RGBA_S3TC_DXT3_Format;break;case c:_=16,o.format=THREE.RGBA_S3TC_DXT5_Format;break;default:if(!(32==C[H]&&16711680&C[y]&&65280&C[L]&&255&C[x]&&4278190080&C[M]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",n(k)),o;D=!0,_=64,o.format=THREE.RGBAFormat}o.mipmapCount=1,C[E]&s&&t!==!1&&(o.mipmapCount=Math.max(1,C[g])),o.isCubemap=C[b]&d?!0:!1,o.width=C[T],o.height=C[v];for(var O=C[m]+4,A=o.width,I=o.height,S=o.isCubemap?6:1,F=0;S>F;F++){for(var B=0;B<o.mipmapCount;B++){if(D)var z=i(e,O,A,I),P=z.length;else var P=Math.max(4,A)/4*Math.max(4,I)/4*_,z=new Uint8Array(e,O,P);var G={data:z,width:A,height:I};o.mipmaps.push(G),O+=P,A=Math.max(.5*A,1),I=Math.max(.5*I,1)}A=o.width,I=o.height}return o}},THREE.MTLLoader=function(e,t,r){this.baseUrl=e,this.options=t,this.crossOrigin=r},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(e,t){var r=this,n=new THREE.XHRLoader;n.setCrossOrigin(this.crossOrigin),n.load(e,function(e){t(r.parse(e))})},parse:function(e){for(var t=e.split("\n"),r={},n=/\s+/,i={},o=0;o<t.length;o++){var a=t[o];if(a=a.trim(),0!==a.length&&"#"!==a.charAt(0)){var s=a.indexOf(" "),d=s>=0?a.substring(0,s):a;d=d.toLowerCase();var p=s>=0?a.substring(s+1):"";if(p=p.trim(),"newmtl"===d)r={name:p},i[p]=r;else if(r)if("ka"===d||"kd"===d||"ks"===d){var h=p.split(n,3);r[d]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else r[d]=p}}var l=new THREE.MTLLoader.MaterialCreator(this.baseUrl,this.options);return l.setMaterials(i),l}},THREE.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var r in e){var n=e[r],i={};t[r]=i;for(var o in n){var a=!0,s=n[o],d=o.toLowerCase();switch(d){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[1]&&(a=!1);break;case"d":this.options&&this.options.invertTransparency&&(s=1-s)}a&&(i[d]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this.materialsInfo[e],r={name:e,side:this.side};for(var n in t){var i=t[n];switch(n.toLowerCase()){case"kd":r.diffuse=(new THREE.Color).fromArray(i);break;case"ka":r.ambient=(new THREE.Color).fromArray(i);break;case"ks":r.specular=(new THREE.Color).fromArray(i);break;case"map_kd":r.map=this.loadTexture(this.baseUrl+i),r.map.wrapS=this.wrap,r.map.wrapT=this.wrap;break;case"ns":r.shininess=i;break;case"d":1>i&&(r.transparent=!0,r.opacity=i)}}return r.diffuse&&(r.ambient||(r.ambient=r.diffuse),r.color=r.diffuse),this.materials[e]=new THREE.MeshPhongMaterial(r),this.materials[e]},loadTexture:function(e,t,r){var n,i=THREE.Loader.Handlers.get(e);return null!==i?n=i.load(e,r):(n=new THREE.Texture,i=new THREE.ImageLoader,i.crossOrigin=this.crossOrigin,i.load(e,function(e){n.image=THREE.MTLLoader.ensurePowerOfTwo_(e),n.needsUpdate=!0,r&&r(n)})),n.mapping=t,n}},THREE.MTLLoader.ensurePowerOfTwo_=function(e){if(!THREE.Math.isPowerOfTwo(e.width)||!THREE.Math.isPowerOfTwo(e.height)){var t=document.createElement("canvas");t.width=THREE.MTLLoader.nextHighestPowerOfTwo_(e.width),t.height=THREE.MTLLoader.nextHighestPowerOfTwo_(e.height);var r=t.getContext("2d");return r.drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),t}return e},THREE.MTLLoader.nextHighestPowerOfTwo_=function(e){--e;for(var t=1;32>t;t<<=1)e|=e>>t;return e+1},THREE.EventDispatcher.prototype.apply(THREE.MTLLoader.prototype),THREE.OBJMTLLoader=function(){},THREE.OBJMTLLoader.prototype={constructor:THREE.OBJMTLLoader,load:function(e,t,r){var n=this,i=new THREE.MTLLoader(e.substr(0,e.lastIndexOf("/")+1));i.load(t,function(t){var i=t;i.preload();var o=new THREE.XHRLoader(n.manager);o.setCrossOrigin(this.crossOrigin),o.load(e,function(e){var t=n.parse(e);t.traverse(function(e){if(e instanceof THREE.Mesh&&e.material.name){var t=i.create(e.material.name);t&&(e.material=t)}}),r(t)})})},parse:function(e,t){function r(e,t,r){return new THREE.Vector3(e,t,r)}function n(e,t){return new THREE.Vector2(e,t)}function i(e,t,r,n){return new THREE.Face3(e,t,r,n)}function o(e,t){m.length>0&&(c.vertices=m,c.mergeVertices(),c.computeFaceNormals(),c.computeBoundingSphere(),l.add(f),c=new THREE.Geometry,f=new THREE.Mesh(c,u)),void 0!==e&&(f.name=e),void 0!==t&&(u=new THREE.MeshLambertMaterial,u.name=t,f.material=u)}function a(e,t,r,n){c.faces.push(void 0===n?i(parseInt(e)-(p+1),parseInt(t)-(p+1),parseInt(r)-(p+1)):i(parseInt(e)-(p+1),parseInt(t)-(p+1),parseInt(r)-(p+1),[E[parseInt(n[0])-1].clone(),E[parseInt(n[1])-1].clone(),E[parseInt(n[2])-1].clone()]))}function s(e,t,r){c.faceVertexUvs[0].push([v[parseInt(e)-1].clone(),v[parseInt(t)-1].clone(),v[parseInt(r)-1].clone()])}function d(e,t,r){void 0===e[3]?(a(e[0],e[1],e[2],r),void 0!==t&&t.length>0&&s(t[0],t[1],t[2])):(void 0!==r&&r.length>0?(a(e[0],e[1],e[3],[r[0],r[1],r[3]]),a(e[1],e[2],e[3],[r[1],r[2],r[3]])):(a(e[0],e[1],e[3]),a(e[1],e[2],e[3])),void 0!==t&&t.length>0&&(s(t[0],t[1],t[3]),s(t[1],t[2],t[3])))}for(var p=0,h=new THREE.Object3D,l=h,c=new THREE.Geometry,u=new THREE.MeshLambertMaterial,f=new THREE.Mesh(c,u),m=[],E=[],v=[],T=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,g=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,w=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,R=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,H=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,y=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,L=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,x=e.split("\n"),M=0;M<x.length;M++){var b=x[M];b=b.trim();var C;if(0!==b.length&&"#"!==b.charAt(0))if(null!==(C=T.exec(b)))m.push(r(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])));else if(null!==(C=g.exec(b)))E.push(r(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])));else if(null!==(C=w.exec(b)))v.push(n(parseFloat(C[1]),parseFloat(C[2])));else if(null!==(C=R.exec(b)))d([C[1],C[2],C[3],C[4]]);else if(null!==(C=H.exec(b)))d([C[2],C[5],C[8],C[11]],[C[3],C[6],C[9],C[12]]);else if(null!==(C=y.exec(b)))d([C[2],C[6],C[10],C[14]],[C[3],C[7],C[11],C[15]],[C[4],C[8],C[12],C[16]]);else if(null!==(C=L.exec(b)))d([C[2],C[5],C[8],C[11]],[],[C[3],C[6],C[9],C[12]]);else if(/^o /.test(b))o(),p+=m.length,m=[],l=new THREE.Object3D,l.name=b.substring(2).trim(),h.add(l);else if(/^g /.test(b))o(b.substring(2).trim(),void 0);else if(/^usemtl /.test(b))o(void 0,b.substring(7).trim());else if(/^mtllib /.test(b)){if(t){var _=b.substring(7);_=_.trim(),t(_)}}else/^s /.test(b)||console.log("THREE.OBJMTLLoader: Unhandled line "+b)}return o(void 0,void 0),h}},THREE.EventDispatcher.prototype.apply(THREE.OBJMTLLoader.prototype),THREE.OBJLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.OBJLoader.prototype={constructor:THREE.OBJLoader,load:function(e,t){var r=this,n=new THREE.XHRLoader(r.manager);n.setCrossOrigin(this.crossOrigin),n.load(e,function(e){t(r.parse(e))})},parse:function(e){function t(e,t,r){return new THREE.Vector3(parseFloat(e),parseFloat(t),parseFloat(r))}function r(e,t){return new THREE.Vector2(parseFloat(e),parseFloat(t))}function n(e,t,r,n){return new THREE.Face3(e,t,r,n)}function i(e){return e=parseInt(e),e>=0?e-1:e+f.length}function o(e){return e=parseInt(e),e>=0?e-1:e+m.length}function a(e){return e=parseInt(e),e>=0?e-1:e+E.length}function s(e,t,r,a){h.faces.push(void 0===a?n(f[i(e)]-1,f[i(t)]-1,f[i(r)]-1):n(f[i(e)]-1,f[i(t)]-1,f[i(r)]-1,[m[o(a[0])].clone(),m[o(a[1])].clone(),m[o(a[2])].clone()]))}function d(e,t,r){h.faceVertexUvs[0].push([E[a(e)].clone(),E[a(t)].clone(),E[a(r)].clone()])}function p(e,t,r){void 0===e[3]?(s(e[0],e[1],e[2],r),void 0!==t&&t.length>0&&d(t[0],t[1],t[2])):(void 0!==r&&r.length>0?(s(e[0],e[1],e[3],[r[0],r[1],r[3]]),s(e[1],e[2],e[3],[r[1],r[2],r[3]])):(s(e[0],e[1],e[3]),s(e[1],e[2],e[3])),void 0!==t&&t.length>0&&(d(t[0],t[1],t[3]),d(t[1],t[2],t[3])))}var h,l,c,u=new THREE.Object3D;/^o /gm.test(e)===!1&&(h=new THREE.Geometry,l=new THREE.MeshLambertMaterial,c=new THREE.Mesh(h,l),u.add(c));var f=[],m=[],E=[],v=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,T=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,g=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,w=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,R=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,H=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,y=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/;e=e.replace(/\\\r\n/g,"");for(var L=e.split("\n"),x=0;x<L.length;x++){var M=L[x];M=M.trim();var b;0!==M.length&&"#"!==M.charAt(0)&&(null!==(b=v.exec(M))?f.push(h.vertices.push(t(b[1],b[2],b[3]))):null!==(b=T.exec(M))?m.push(t(b[1],b[2],b[3])):null!==(b=g.exec(M))?E.push(r(b[1],b[2])):null!==(b=w.exec(M))?p([b[1],b[2],b[3],b[4]]):null!==(b=R.exec(M))?p([b[2],b[5],b[8],b[11]],[b[3],b[6],b[9],b[12]]):null!==(b=H.exec(M))?p([b[2],b[6],b[10],b[14]],[b[3],b[7],b[11],b[15]],[b[4],b[8],b[12],b[16]]):null!==(b=y.exec(M))?p([b[2],b[5],b[8],b[11]],[],[b[3],b[6],b[9],b[12]]):/^o /.test(M)?(h=new THREE.Geometry,l=new THREE.MeshLambertMaterial,c=new THREE.Mesh(h,l),c.name=M.substring(2).trim(),u.add(c)):/^g /.test(M)||(/^usemtl /.test(M)?l.name=M.substring(7).trim():/^mtllib /.test(M)||/^s /.test(M)))}for(var C=u.children,x=0,_=C.length;_>x;x++){var h=C[x].geometry;h.computeFaceNormals(),h.computeBoundingSphere()}return u}},function(){var e,t={}.hasOwnProperty,r=function(e,r){function n(){this.constructor=e}for(var i in r)t.call(r,i)&&(e[i]=r[i]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};e=function(e){function t(){t.__super__.constructor.call(this,{amibientLight:{color:3355443}})}var n;return r(t,e),n=!0,t.prototype._setup=function(){return this._loadModel(),this._addLight()},t.prototype._addLight=function(){var e;return this.camera.position.x=0,this.camera.position.y=200,this.camera.position.z=800,e=new THREE.SpotLight(16777215,.5,0,Math.PI/6,10),this.scene.add(e),e.position.set(-600,800,100),e.castShadow=!0,e.shadowMapWidth=150,e.shadowMapHeight=150,this._addLightHelper(e),e=new THREE.SpotLight(16777215,.3,0,Math.PI/6,10),this.scene.add(e),e.position.set(-600,300,-400),this._addLightHelper(e),e=new THREE.SpotLight(16777215,.3,0,Math.PI/6,10),this.scene.add(e),e.position.set(600,300,-400),this._addLightHelper(e),this.scene.add(new THREE.GridHelper(1e3,100))},t.prototype._addLightHelper=function(e){var t;return n?(t=new THREE.SpotLightHelper(e),this.scene.add(t)):void 0},t.prototype._loadModel=function(){return THREE.Loader.Handlers.add(/\.dds$/i,new THREE.DDSLoader),this._loadModelObj("../../model/sidonia/tanikaze/KS10010101000",function(e){return function(t){return e.tabukaze=t}}(this))},t.prototype._loadModelObj=function(e,t){var r;return r=new THREE.OBJMTLLoader,r.load(e+".obj",e+".mtl",function(e){return function(r){var n;return console.log("object:",r),n=20,r.scale.set(n,n,n),e.scene.add(r),"function"==typeof t?t(r):void 0}}(this))},t.prototype._amp1=0,t.prototype._amp2=0,t.prototype._update=function(){return this.tanikaze&&(this.tanikaze.rotation.x+=.2),this.hoshijiro&&(this.hoshijiro.rotation.y+=.2),this.izana?(this.izana.rotation.z+=Math.sin(this._amp1+=.01),this.izana.rotation.x+=.3*Math.sin(this._amp2+=.02)):void 0},t}(BaseWorld),"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof exports?exports.Sidonia=e:window.Sidonia=e}.call(this);